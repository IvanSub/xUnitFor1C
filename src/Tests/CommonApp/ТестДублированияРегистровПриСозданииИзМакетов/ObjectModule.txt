
//{ основная процедура для юнит-тестирования xUnitFor1C
Перем ЮТест;

Функция ПолучитьСписокТестов(ЮнитТестирование) Экспорт
	
	ЮТест = ЮнитТестирование;
	
	ВсеТесты = Новый Массив;

	ВсеТесты.Добавить("Тест_ДолженСоздатьДвеЗаписиВРегистреСведенийЧерезНаборЗаписей");

	Возврат ВсеТесты;
	
КонецФункции
//}

//{ блок юнит-тестов - сами тесты

Процедура ПередЗапускомТеста() Экспорт
	НачатьТранзакцию();
КонецПроцедуры

Процедура ПослеЗапускаТеста() Экспорт
	Если ТранзакцияАктивна() Тогда
		ОтменитьТранзакцию();
	КонецЕсли;
КонецПроцедуры

Процедура Тест_ДолженСоздатьДвеЗаписиВРегистреСведенийЧерезНаборЗаписей() Экспорт
	ТипМетаданного = "РегистрСведений";
	ВидМетаданного = "РегистрСведений1";
	КоличествоДо = ЮТест.ПолучитьКоличествоЭлементовРегистраПоОтбору(ТипМетаданного, ВидМетаданного);
	
	Макет = ПолучитьМакет("СозданиеДвухНаборовЗаписейВРегистреСведений");
	ТестовыеДанные = ЮТест.СоздатьДанныеПоТабличномуДокументу(Макет);
	
	ЮТест.ПроверитьТип(ТестовыеДанные, "Структура");
	ЮТест.ПроверитьРавенство(5, ТестовыеДанные.Количество());
	
	КоличествоПосле = ЮТест.ПолучитьКоличествоЭлементовРегистраПоОтбору(ТипМетаданного, ВидМетаданного);
	ЮТест.ПроверитьРавенство(КоличествоДо + 2, КоличествоПосле, "КоличествоДо + 2, КоличествоПосле");
	
	//ЮТест.ПроверитьИстину(ТестовыеДанные.Свойство("ЗаписьРегистра1"), "Ожидали, что есть переменная 'ЗаписьРегистра1'");
	//ЮТест.Проверить(ТестовыеДанные.ЗаписьРегистра1.Выбран(), "Ожидали, что ЗаписьРегистра1.Выбран() вернет Ложь, а вернулась Истина");
	//ЮТест.ПроверитьТип(ТестовыеДанные.ЗаписьРегистра1, "РегистрСведенийНаборЗаписей.РегистрСведений1");
	//ЮТест.ПроверитьРавенство(2, ТестовыеДанные.ЗаписьРегистра1.Количество(), "ТестовыеДанные.ЗаписьРегистра1.Количество()");
	//
	//запись = ТестовыеДанные.ЗаписьРегистра1[0];
	//ЮТест.ПроверитьРавенство(ТестовыеДанные.ПростойСправочник, запись.ПростойСправочник);
	//ЮТест.ПроверитьРавенство(ТестовыеДанные.ПростойСправочник21, запись.ПростойСправочник2);
	//ЮТест.ПроверитьРавенство(300, запись.РесурсЧисло);
	//ЮТест.ПроверитьЛожь(запись.РесурсБулево);
	//
	//запись = ТестовыеДанные.ЗаписьРегистра1[1];
	////ЮТест.ПроверитьИстину(ТестовыеДанные.Свойство("ЗаписьРегистра2"), "Ожидали, что есть переменная 'ЗаписьРегистра2'");
	//ЮТест.ПроверитьРавенство(ТестовыеДанные.ПростойСправочник, запись.ПростойСправочник);
	//ЮТест.ПроверитьРавенство(ТестовыеДанные.ПростойСправочник22, запись.ПростойСправочник2);
	//ЮТест.ПроверитьРавенство(400, запись.РесурсЧисло);
	//ЮТест.ПроверитьИстину(запись.РесурсБулево);
КонецПроцедуры


//} 